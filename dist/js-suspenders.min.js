/*! js-suspenders 0.10.0 (RoboJS Build) | MIT */
!function(a,b){"function"==typeof define&&define.amd?define([],b):a.jss=b()}(this,function(){"use strict";function a(a){this._responseType=a}function b(a,b){this._response=null,this._destroyed=!1,this._responseType=a,this.injector=b}function c(a,b){this._value=a,this.injector=b}function d(b,c,d,e){this.injector=b,this._type=c,this._name=d,this._mappingId=e,this._mapProvider(new a(c))}function e(){this._mappings={},this._managedObjects={},this.providerMappings={},this._descriptionsCache={}}var f={},g={__keyPrefix:new Date+"",isString:function(a){return"string"==typeof a||a&&"object"==typeof a&&"[object String]"==toString.call(a)||!1},isArray:Array.isArray,isFunction:function(a){return"function"==typeof a},memoize:function(a,b){if(!g.isFunction(a))throw new TypeError;var c=function(){var d=c.cache,e=b?b.apply(this,arguments):g.__keyPrefix+arguments[0];return Object.prototype.hasOwnProperty.call(d,e)?d[e]:d[e]=a.apply(this,arguments)};return c.cache={},c},functionName:function(a){var b=a.toString();return b=b.substr("function ".length),b=b.substr(0,b.indexOf("(")),b.trim()},getQualifiedClassName:function(a){return g.isString(a)?a:g.isFunction(a)?a.name||g.functionName(a):g.isArray(a)?(a=a[a.length-1],a.name||g.functionName(a)):a},getId:function(a,b){return b||g.getQualifiedClassName(a)}};a.prototype={apply:function(a,b){return b.instantiateUnmapped(this._responseType)},destroy:function(){}},b.prototype={apply:function(){return this._response=this._response||this.createResponse(this.injector),this._response},createResponse:function(a){if(this._destroyed)throw new Error("Forbidden usage of unmapped singleton provider for type "+this._responseType.toString());return a.instantiateUnmapped(this._responseType)},destroy:function(){this._destroyed=!0,this._response&&this.injector&&this.injector.hasManagedInstance(this._response)&&this.injector.destroyInstance(this._response),this.injector=null,this._response=null}},c.prototype={apply:function(){return this._value},destroy:function(){this._value&&this.injector&&this.injector.hasManagedInstance(this._value)&&this.injector.destroyInstance(this._value),this.injector=null,this._value=null}},d.prototype={asSingleton:function(a){return this.toProvider(new b(this._type,this.injector)),a&&this.injector.getInstance(this._type,this._name),this},toType:function(b){return this.toProvider(new a(b))},toValue:function(a,b){return this.toProvider(new c(a,b?this.injector:null))},toProvider:function(a){return this._mapProvider(a),this},hasProvider:function(){return this.injector.providerMappings[this._mappingId]},getProvider:function(){return this.injector.providerMappings[this._mappingId]},_mapProvider:function(a){this.injector.providerMappings[this._mappingId]=a}};var h={capitalize:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},findConstructorParams:function(a){var b=[];if(a.length){var c=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,d=/,/,e=/^\s*(_?)(\S+?)\1\s*$/,f=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,g=a.toString().replace(f,""),h=g.match(c),i=this;b=h[1].split(d).map(function(a){return a.replace(e,function(a,b,c){return i.capitalize(c)})})}return b},getInstanceDescription:function(a){var b=[];return g.isArray(a)?b=a.slice(0,-1):g.isString(a)?b=[]:g.isFunction(a)&&(b=this.findConstructorParams(a)),b},describeInjections:function(a){return{createInstance:this.createInstance.bind(this,this.getInstanceDescription(a))}},createInstance:function(a,b,c){var d=g.isArray(b)?b[b.length-1]:b,e=a.map(function(a){return c.getProvider(a).apply(b,c)});return e.unshift(b),new(d=d.bind.apply(d,e))}};return e.prototype={getDescription:g.memoize(function(a){return this._descriptionsCache[a]=h.describeInjections(a),this._descriptionsCache[a]}),map:g.memoize(function(a,b){var c=g.getId(a,b),e=new d(this,a,b,c);return this._mappings[c]=e,e},g.getId),unmap:function(a,b){var c=g.getId(a,b),d=this._mappings[c];d&&d.getProvider().destroy(),delete this._mappings[c],delete this.providerMappings[c],delete this._descriptionsCache[a]},getOrCreateNewInstance:function(a,b){return this.satisfies(a,b)&&this.getInstance(a,b)||this.instantiateUnmapped(a)},satisfies:function(a,b){var c=g.getId(a,b);return null!=this.getProvider(c,!0)},satisfiesDirectly:function(a,b){return this.hasDirectMapping(a,b)},getMapping:function(a,b){return this._mappings[g.getId(a,b)]},hasManagedInstance:function(a){return this._managedObjects[a]},getInstance:function(a,b,c){var d=g.getId(a,b),e=this.getProvider(d);return e&&e.apply(c,this)},instantiateUnmapped:function(a){return this.getDescription(a).createInstance(a,this)},destroyInstance:function(a){delete this._managedObjects[a]},teardown:function(){this._mappings.forEach(function(a){a.getProvider().destroy()});var a=[];for(this._managedObjects.forEach(function(b){b&&a.push(b)});a.length;)this.destroyInstance(a.pop());this.providerMappings.forEach(function(a){delete this.providerMappings[a]}),this._mappings={},this._managedObjects={},this._descriptionsCache={}},hasDirectMapping:function(a,b){return null!=this._mappings[g.getId(a,b)]},getProvider:function(a){return this.providerMappings[a]}},f={Injector:e}});
//# sourceMappingURL=js-suspenders.min.js.map