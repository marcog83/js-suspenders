/*! js-suspenders 0.0.2 (RoboJS Build) | MIT */
!function(a,b){"function"==typeof define&&define.amd?define(["lodash"],b):a.jss=b(window._)}(this,function(a){"use strict";function b(){this._managedObjects={},this.providerMappings={},this._descriptionsCache={}}var c={},d={__keyPrefix:new Date+"",isString:function(a){return"string"==typeof a||a&&"object"==typeof a&&"[object String]"==toString.call(a)||!1},isArray:Array.isArray,isFunction:function(a){return"function"==typeof a},memoize:function(a,b){if(!d.isFunction(a))throw new TypeError;var c=function(){var e=c.cache,f=b?b.apply(this,arguments):d.__keyPrefix+arguments[0];return Object.prototype.hasOwnProperty.call(e,f)?e[f]:e[f]=a.apply(this,arguments)};return c.cache={},c},functionName:function(a){var b=a.toString();return b=b.substr("function ".length),b=b.substr(0,b.indexOf("(")),b.trim()},getQualifiedClassName:function(a){return d.isString(a)?a:d.isFunction(a)?a.name||d.functionName(a):d.isArray(a)?(a=a[a.length-1],a.name||d.functionName(a)):a},getId:function(a,b){return b||d.getQualifiedClassName(a)}},e={create:function(a,b){return{apply:function(a,b){return b(a)}.bind(this,a,b),destroy:function(a,b){a&&b&&b.hasManagedInstance(a)&&b.destroyInstance(a)}.bind(this,a)}}},f={create:function(b,c,d,f){b.providerMappings[f]=e.create(c,b.instantiateUnmapped.bind(b));var g=a.partial(function(a,b,c){a[b]=c},b.providerMappings,f),h=a.compose(g,e.create),i=a.partial(function(a,b){return a[b]},b.providerMappings,f);return{asSingleton:a.partial(function(b,c,d,e){h(b,a.memoize(d.instantiateUnmapped.bind(d))),e&&d.getInstance(b,c)},c,d,b),toType:a.partial(function(a,b){h(b,a)},b.instantiateUnmapped.bind(b)),toValue:function(a){h(a,function(a){return a}.bind(this,a))},hasProvider:i,getProvider:i}}},g={capitalize:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},findConstructorParams:function(a){var b=[];if(a.length){var c=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,d=/,/,e=/^\s*(_?)(\S+?)\1\s*$/,f=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,g=a.toString().replace(f,""),h=g.match(c),i=this;b=h[1].split(d).map(function(a){return a.replace(e,function(a,b,c){return i.capitalize(c)})})}return b},getInstanceDescription:function(a){var b=[];return d.isArray(a)?b=a.slice(0,-1):d.isString(a)?b=[]:d.isFunction(a)&&(b=this.findConstructorParams(a)),b},describeInjections:function(a){return{createInstance:this.createInstance.bind(this,this.getInstanceDescription(a))}},createInstance:function(a,b,c){var e=d.isArray(b)?b[b.length-1]:b,f=a.map(function(a){return c.getProvider(a).apply(b,c)});return f.unshift(b),new(e=e.bind.apply(e,f))}};return b.prototype={getDescription:d.memoize(function(a){return this._descriptionsCache[a]=g.describeInjections(a),this._descriptionsCache[a]}),map:d.memoize(function(b,c){var e=f.create.bind(f,this,b,c);return a.compose(e,d.getId)(b,c)},d.getId),unmap:function(a,b){var c=d.getId(a,b),e=this.map.cache[c];e&&e.getProvider().destroy(),delete this.map.cache[c],delete this.providerMappings[c],delete this._descriptionsCache[a]},getOrCreateNewInstance:function(a,b){return this.satisfies(a,b)&&this.getInstance(a,b)||this.instantiateUnmapped(a)},satisfies:function(a,b){var c=d.getId(a,b);return null!=this.getProvider(c,!0)},satisfiesDirectly:function(a,b){return this.hasDirectMapping(a,b)},getMapping:function(a,b){return this.map.cache[d.getId(a,b)]},hasManagedInstance:function(a){return this._managedObjects[a]},getInstance:function(a,b){var c=d.getId(a,b),e=this.getProvider(c);return e&&e.apply(a,this)},instantiateUnmapped:function(a){return this.getDescription(a).createInstance(a,this)},destroyInstance:function(a){delete this._managedObjects[a]},teardown:function(){this.map.cache.forEach(function(a){a.getProvider().destroy()});var a=[];for(this._managedObjects.forEach(function(b){b&&a.push(b)});a.length;)this.destroyInstance(a.pop());this.providerMappings.forEach(function(a){delete this.providerMappings[a]}),this.map.cache={},this._managedObjects={},this._descriptionsCache={}},hasDirectMapping:function(a,b){return null!=this.map.cache[d.getId(a,b)]},getProvider:function(a){return this.providerMappings[a]}},c={Injector:b}});
//# sourceMappingURL=js-suspenders.min.js.map